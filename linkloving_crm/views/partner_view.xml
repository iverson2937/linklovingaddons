<?xml version="1.0" encoding="utf-8"?>
<openerp>
    <data>
        <record id="crm_view_partner_form_linkloving" model="ir.ui.view">
            <field name="name">crm form</field>
            <field name="model">res.partner</field>
            <field name="inherit_id" ref="base.view_partner_form"/>
            <field name="arch" type="xml">


                <xpath expr="//div[@class='o_row']" position="before">
                    <div t-if="employee">
                        <group>
                            <field name="employee" string="是否是员工:"/>
                        </group>

                    </div>
                </xpath>


                <xpath expr="//field[@name='category_id']" position="after">
                    <field name="public_partners" invisible="1"/>
                    <field name="old_user_id" invisible="1"/>
                    <field name="crm_source_id" string="来源" attrs="{'invisible': [('customer','!=', True)]}"
                           options="{'no_create':True}"/>
                    <field name="customer_status" options="{'no_create':True}"
                           attrs="{'invisible':[('customer','=', False)]}"/>
                </xpath>

                <xpath expr="//field[@name='customer_status']" position="after">
                    <field name="is_order" invisible="1" attrs="{'invisible':[('customer','=', False)]}"/>
                    <field name="crm_is_partner" attrs="{'invisible':[('customer','=', False)]}" string="线索客户"/>


                    <field name="crm_is_partner_temporary" attrs="{'invisible':[('customer','=', False)]}"
                           string="是否是客户"/>

                </xpath>


                <xpath expr="//form/sheet/notebook/page/field[@name='child_ids']/form/sheet/group/group/div/div/field[@name='country_id']"
                       position="after">
                    <field name="detailed_address"/>
                </xpath>


                <!--创建联系人 di第一栏-->
                <xpath expr="//form/sheet/notebook/page/field[@name='child_ids']/form/sheet/group/group/field[@name='mobile']"
                       position="after">
                    <field name="im_tool"/>

                    <field name="customer_social_platform"/>
                    <field name="customer_birthday"/>
                    <field name="customer_sex"/>
                    <field name="customer_image" widget='image' style="width:400px;height:300px;overflow: auto;"
                           class="test_img"/>
                </xpath>


                <xpath expr="//t[@t-name='kanban-box']" position="replace">
                    <t t-name="kanban-box">
                        <t t-set="color" t-value="kanban_color(record.color.raw_value)"/>
                        <div t-att-class="color + (record.title.raw_value == 1 ? ' oe_kanban_color_alert' : '') + ' oe_kanban_global_click'">
                            <a t-if="!read_only_mode" type="delete" class="fa fa-times pull-right"/>
                            <div class="o_kanban_image">
                                <img t-if="record.image.raw_value"
                                     t-att-src="kanban_image('res.partner', 'customer_image', record.id.value)"/>
                                <t t-if="!record.image.raw_value">
                                    <img t-if="record.type.raw_value === 'delivery'"
                                         t-att-src='_s + "/base/static/src/img/truck.png"'/>
                                    <img t-if="record.type.raw_value === 'invoice'"
                                         t-att-src='_s + "/base/static/src/img/money.png"'/>
                                    <t t-if="record.type.raw_value !== 'invoice' &amp;&amp; record.type.raw_value !== 'delivery'">
                                        <img t-if="record.is_company.raw_value === true"
                                             t-att-src='_s + "/base/static/src/img/company_image.png"'/>
                                        <img t-if="record.is_company.raw_value === false"
                                             t-att-src='_s + "/base/static/src/img/avatar.png"'/>
                                    </t>
                                </t>
                            </div>
                            <div class="oe_kanban_details">
                                <field name="name"/>
                                <div t-if="record.function.raw_value">
                                    <field name="function"/>
                                </div>
                                <div t-if="record.email.raw_value">
                                    <field name="email"/>
                                </div>
                                <div t-if="record.type.raw_value != 'contact'">
                                    <div>
                                        <field name="zip"/>
                                        <field name="city"/>
                                    </div>
                                    <field t-if="record.state_id.raw_value" name="state_id"/>
                                    <field name="country_id"/>
                                </div>
                                <div t-if="record.phone.raw_value">Phone:
                                    <field name="phone"/>
                                </div>
                                <div t-if="record.mobile.raw_value">Mobile:
                                    <field name="mobile"/>
                                </div>
                                <div t-if="record.fax.raw_value">Fax:
                                    <field name="fax"/>
                                </div>
                            </div>
                        </div>
                    </t>

                </xpath>

                <xpath expr="//field[@name='website']" position="replace">

                </xpath>


                <xpath expr="//field[@name='type']" position="before">
                    <field name="website" widget="url" placeholder="e.g. www.odoo.com"/>
                </xpath>


                <xpath expr="//field[@name='country_id']" position="after">
                    <field name="continent" placeholder="大洲"/>
                </xpath>

                <xpath expr="//field[@name='category_id']" position="after">
                    <field name="express_sample_record"/>
                </xpath>

                <!--供应商显示的字段-->
                <xpath expr="//field[@name='email']" position="after">
                    <field name="qq" attrs="{'invisible':1}" string="QQ/旺旺/微信"/>
                </xpath>


                <xpath expr="//field[@name='lang']" position="after">
                    <field name="skype" invisible="1"/>
                </xpath>

                <xpath expr="//field[@name='skype']" position="after">
                    <field name="whatsapp" invisible="1"/>
                </xpath>

                <xpath expr="//field[@name='whatsapp']" position="after">
                    <field name="wechat" invisible="1"/>
                </xpath>

                <xpath expr="//field[@name='wechat']" position="after">
                    <field name="communication_identifier" invisible="1"/>
                </xpath>
                <xpath expr="//field[@name='lang']" position="after">
                    <field name="customer_code" attrs="{'invisible':[('customer','!=',True)]}"/>
                    <field name="customer_alias" attrs="{'invisible':[('customer','!=',True)]}"/>
                    <field name="mutual_rule_id" attrs="{'invisible':[('customer','=', False)]}"/>

                    <field name="customer_write_date" invisible="1"/>

                </xpath>

                <!--<xpath expr="//field[@name='customer_alias']" position="after">-->
                <!--<field name="mutual_rule_id"/>-->
                <!--</xpath>-->


                <!--<xpath expr="//page[@name='accounting_disabled']" position="after">-->
                <!--<page string="产品" attrs="{'invisible': True}">-->
                <!--<field name="interested_in_product" domain="[('sale_ok','=',True)]"-->
                <!--context="{'search_default_rteng':1,'search_default_filter_categ_id':1}"/>-->
                <!--</page>-->
                <!--</xpath>-->


                <xpath expr="//page[@name='internal_notes']" position="replace">

                    <page name='internal_notes' string="信息备注">

                        <group attrs="{'invisible':[('customer','=', False)]}">
                            <label for="customer_country_id" string="市场"/>
                            <div class="o_customer_country_id_format">
                                <div>
                                    <span>全世界 &#160;&#160;&#160;&#160;</span>
                                    <field name="customer_is_world"/>
                                </div>
                                <field name="customer_continent" widget="many2many_tags" placeholder="大洲"
                                       attrs="{'invisible': [('customer_is_world', '=', True)]}"/>
                                <field name="customer_country_id" placeholder="国家" class="o_address_country"
                                       widget="many2many_tags"
                                       options="{&quot;no_open&quot;: True, &quot;no_create&quot;: True}"
                                       attrs="{'readonly': [('type', '=', 'contact'),('parent_id', '!=', False)],'invisible': [('customer_is_world', '=', True)]}"/>
                            </div>
                        </group>
                        <group>
                            <group attrs="{'invisible':[('customer','=', False)]}">
                                <!--<field name="customer_bazaar"/>-->
                                <field name="customer_scale"/>
                                <field name="source_id" string="渠道"
                                       attrs="{'invisible': [('customer','!=', True)]}"/>
                                <field name="customer_store_number"/>
                                <field name="customer_store_product_type"/>
                                <field name="customer_user_group"/>
                            </group>
                            <field name="comment" placeholder="内部备注..."/>
                        </group>
                    </page>

                    <page string="产品" attrs="{'invisible':[('customer','=', False)]}">
                        <field name="product_series_ids" widget="crm_tree_list_js" attrs="">
                            <tree string="产品系列" default_order="crm_product_type" create="0">
                                <field name="crm_product_type"/>
                                <field name="name"/>
                                <field name="detail"/>
                                <field name="crm_Parent_id"/>
                                <field name="crm_Parent_ontomany_ids"/>
                            </tree>
                        </field>
                        <button string="添加型号" name="action_tree_list_view_res" type="object" class="btn-primary"
                                groups=""/>
                    </page>

                </xpath>


                <xpath expr="//div[@name='button_box']" position="inside">
                    <button type="object"
                            name="action_view_question_order"
                            context="{'sale_type': 'question'}"
                            class="oe_stat_button"
                            icon="fa-commenting-o">
                        <field name="order_partner_question_count" widget="statinfo" string="问题概览"/>
                    </button>

                    <button type="object"
                            name="action_view_partner_img"
                            class="oe_stat_button"
                            icon="fa-photo fa-image fa-picture-o">
                        <field name="partner_img_count" widget="statinfo" string="公司照片"/>
                    </button>

                </xpath>


                <!--you-->

                <xpath expr="//field[@name='phone']" position="replace">
                    <field name="priority" widget="priority" attrs="{'invisible':[('customer','=', False)]}"/>
                </xpath>

                <xpath expr="//field[@name='fax']" position="attributes">
                    <attribute name='invisible'>1</attribute>
                </xpath>

                <xpath expr="//field[@name='email']" position="replace">
                    <!--<attribute name='invisible'>[('customer','=', True)]</attribute>-->

                    <field name="email" attrs="{'invisible':[('customer','=', True)]}"/>

                </xpath>

                <xpath expr="//field[@name='lang']" position="attributes">
                    <attribute name='invisible'>1</attribute>
                </xpath>


            </field>
        </record>


        <record id="linkloving_view_partner_tree_sale" model="ir.ui.view">
            <field name="name">res.partner.tree.sale</field>
            <field name="model">res.partner</field>
            <field name="inherit_id" ref="base.view_partner_tree"/>
            <field name="arch" type="xml">

                <xpath expr="//tree" position="attributes">
                    <attribute name="default_order">customer_write_date desc</attribute>
                </xpath>

                <xpath expr="//field[@name='display_name']" position="after">
                    <field name="website" widget="url"/>
                    <field name="priority" widget="priority_star"/>
                    <field name="country_id"/>
                    <field name="customer_status"/>
                    <field name="user_id"/>
                    <field name="is_order"/>
                </xpath>

            </field>
        </record>


        <record id="mail.view_emails_partner_info_form" model="ir.ui.view">
            <field name="name">res.partner.emails.info.inherit</field>
            <field name="model">res.partner</field>
            <field name="inherit_id" ref="base.view_partner_form"/>
            <field name="arch" type="xml">
                <xpath expr="//field[@name='user_id']" position="after">
                    <field name='notify_email' widget="radio" groups="base.group_no_one"/>
                    <field name="opt_out" string="Mailing Opt-Out" groups="base.group_no_one"/>
                    <field name="message_bounce" groups="base.group_no_one"/>
                </xpath>
                <xpath expr="//sheet" position="after">
                    <div class="oe_chatter">
                        <field name="message_follower_ids" widget="mail_followers"/>
                        <field name="message_ids" widget="mail_threads" options='{"thread_level": 1}'/>
                    </div>
                </xpath>


                <!--<xpath expr="//page[@name='sales_purchases']/group/group/field[@name='user_id']" position="replace">-->
                <!--<field name="user_id"-->
                <!--context="{'default_groups_ref': ['base.group_user', 'base.group_partner_manager', 'project.group_project_user']}"/>-->
                <!--</xpath>-->


            </field>
        </record>


        <record id="crm_view_res_partner_filter_assign" model="ir.ui.view">
            <field name="name">crm.res.partner.geo.inherit.search</field>
            <field name="model">res.partner</field>
            <field name="inherit_id" ref="base.view_res_partner_filter"/>
            <field name="arch" type="xml">

                <xpath expr="//filter[@name='inactive']" position="after">
                    <filter string="新增的客户" name="partner_day_new"
                            domain="[ ('create_date', '&gt;=', context_today().strftime('%Y-%m-%d'))]"/>

                    <filter string="今日跟进客户" name="partner_today_follow"
                            domain="[ ('customer_follow_up_date', '&gt;=', context_today().strftime('%Y-%m-%d'))]"/>

                </xpath>

                <xpath expr="//group[@name='group_by']/filter[@name='salesperson']" position="after">
                    <filter string="销售团队" name="team_id" context="{'group_by' : 'team_id'}" domain="[]"/>
                    <filter string="客户星级" name="priority" context="{'group_by' : 'priority'}" domain="[]"/>
                </xpath>

            </field>
        </record>

        <!--<record id="crm_view_crm_team_form" model="ir.ui.view">-->
        <!--<field name="name">crm.team.form</field>-->
        <!--<field name="model">crm.team</field>-->
        <!--<field name="inherit_id" ref="sales_team.crm_team_view_form"/>-->
        <!--<field name="arch" type="xml">-->

        <!--<xpath expr="//div[@name='button_box']" position="inside">-->

        <!--<button type="object"-->
        <!--name="action_view_partner_img"-->
        <!--class="oe_stat_button"-->
        <!--icon="fa-photo fa-image fa-picture-o"-->
        <!--string="设置销售员目标">-->
        <!--</button>-->

        <!--</xpath>-->

        <!--</field>-->
        <!--</record>-->


        <record id="crm_view_document_file_kanban_img" model="ir.ui.view">
            <field name="name">ir.attachment kanban crm</field>
            <field name="model">ir.attachment</field>
            <field name="inherit_id" ref="mail.view_document_file_kanban"/>
            <field name="arch" type="xml">
                <xpath expr="//field[@name='name']" position="after">
                    <field name="res_name" invisible="1"/>
                    <field name="partner_img_id" invisible="1"/>
                </xpath>

            </field>
        </record>


        <record id="crm_partner_form_view_oppor" model="ir.ui.view">
            <field name="name">crm.lead.form.opportunity.my</field>
            <field name="model">crm.lead</field>
            <field name="inherit_id" ref="crm.crm_case_form_view_oppor"/>
            <field name="arch" type="xml">


                <xpath expr="//group/group/field[@name='partner_id']" position="replace">
                    <field name="partner_id"
                           string="客户" domain="[('customer', '=', True),('is_company','=',True)]"
                           context="{'search_default_customer': 1,
                                        'default_name': partner_name, 'default_street': street,
                                        'default_street2': street2, 'default_city': city,
                                        'default_state_id': state_id, 'default_zip': zip,
                                        'default_country_id': country_id, 'default_function': function,
                                        'default_phone': phone, 'default_mobile': mobile,
                                        'default_fax': fax, 'default_email': email_from,
                                        'default_user_id': user_id, 'default_team_id': team_id}"/>
                </xpath>

                <xpath expr="//field[@name='message_ids']" position="replace">
                    <field name="message_ids" widget="mail_threads"/>
                </xpath>

                <xpath expr="//group/group/field[@name='email_from']" position="attributes">
                    <attribute name='invisible'>1</attribute>
                </xpath>

                <xpath expr="//group/group/field[@name='phone']" position="attributes">
                    <attribute name='invisible'>1</attribute>
                </xpath>

                <xpath expr="//group/group/field[@name='team_id']" position="after">
                    <field name="lead_price_sheet"/>
                </xpath>

                <xpath expr="//page[@name='lead']" position="after">
                    <page string="产品">
                        <field name="product_series_ids" widget="crm_tree_list_js" attrs="">
                            <tree string="产品系列" default_order="crm_product_type" create="0">
                                <field name="crm_product_type"/>
                                <field name="name"/>
                                <field name="detail"/>
                                <field name="crm_Parent_id"/>
                                <field name="crm_Parent_ontomany_ids"/>
                            </tree>
                        </field>
                        <button string="添加型号" name="action_tree_list_view" type="object" class="btn-primary" groups=""/>
                        <div class="oe_clear"/>
                    </page>

                </xpath>


            </field>
        </record>


        <record id="crm_view_crm_lead2opportunity_partner" model="ir.ui.view">
            <field name="name">crm.lead2opportunity.partner.form.inherit</field>
            <field name="model">crm.lead2opportunity.partner</field>
            <field name="inherit_id" ref="crm.view_crm_lead2opportunity_partner"/>
            <field name="arch" type="xml">
                <xpath expr="//group/field[@name='team_id']" position="after">
                    <field name="mutual_customer_id" options="{'no_create':True}"/>
                </xpath>
            </field>
        </record>


        <!--  Partners inherited form -->
        <record id="linkloving_view_task_partner_info_form" model="ir.ui.view">
            <field name="name">res.partner.task.buttons</field>
            <field name="model">res.partner</field>
            <field name="inherit_id" ref="project.view_task_partner_info_form"/>
            <field name="arch" type="xml">

                <xpath expr="//button[@name='%(project.action_view_task)d']" position="attributes">
                    <attribute name='invisible'>1</attribute>
                </xpath>

            </field>
        </record>

        <record id="linkloving_view_partners_form_crm1" model="ir.ui.view">
            <field name="name">view.res.partner.form.crm.inherited1</field>
            <field name="model">res.partner</field>
            <field name="inherit_id" ref="crm.view_partners_form_crm1"/>
            <field name="arch" type="xml">

                <xpath expr="//field[@name='meeting_count']" position="attributes">
                    <attribute name='string'>日程</attribute>
                </xpath>

            </field>
        </record>


    </data>
</openerp>