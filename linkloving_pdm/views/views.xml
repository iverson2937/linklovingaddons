<openerp>
    <data>

        <record id="action_review_process_wizard" model="ir.actions.act_window">
            <field name="name">选择下一个审核人</field>
            <field name="type">ir.actions.act_window</field>
            <field name="res_model">review.process.wizard</field>
            <field name="view_mode">form</field>
            <field name="target">new</field>
        </record>
        <!--<record id="product_template_form_inherit" model="ir.ui.view">-->
        <!--<field name="name">product.template.form.inherit</field>-->
        <!--<field name="model">product.template</field>-->
        <!--<field name="inherit_id" ref="product.product_template_only_form_view"/>-->
        <!--<field name="arch" type="xml">-->
        <!--<xpath expr="//page[@name='notes']" position="after">-->
        <!--<page string="SIP">-->
        <!--<field name="sip_files" mode="kanban"-->
        <!--context="{'default_product_tmpl_id':active_id,'default_type':'sip'}">-->
        <!--<kanban>-->
        <!--<field name="type"/>-->
        <!--<field name="file_name"/>-->
        <!--<field name="review_id" options="{'always_reload': True}"/>-->
        <!--&lt;!&ndash;<field name="has_right_to_review" invisible="1"/>&ndash;&gt;-->

        <!--<templates>-->
        <!--<t t-name="kanban-box">-->
        <!--<div class="oe_kanban_global_click">-->
        <!--<div class="oe_kanban_details">-->
        <!--<field name="file_name" string="文件名"/>-->
        <!--<field name="state"/>-->
        <!--&lt;!&ndash;<field name="has_right_to_review" invisible="1"/>&ndash;&gt;-->
        <!--<field name="review_id" options="{'always_reload': True}"/>-->

        <!--</div>-->
        <!--<div class="o_kanban_button">-->
        <!--<button name="%(action_review_process_wizard)d"-->
        <!--type="action"-->
        <!--class="oe_highlight"-->
        <!--context="{'default_product_attachment_info_id':active_id}"-->
        <!--&gt;审核操作-->
        <!--</button>-->
        <!--&lt;!&ndash;attrs="{'invisible': [('has_right_to_review', '=', False)]}"&ndash;&gt;-->
        <!--</div>-->
        <!--</div>-->
        <!--</t>-->
        <!--</templates>-->
        <!--</kanban>-->
        <!--&lt;!&ndash;<form string="文件">&ndash;&gt;-->
        <!--&lt;!&ndash;<sheet>&ndash;&gt;-->
        <!--&lt;!&ndash;<group>&ndash;&gt;-->

        <!--&lt;!&ndash;<group>&ndash;&gt;-->
        <!--&lt;!&ndash;<field name="file_name"/>&ndash;&gt;-->
        <!--&lt;!&ndash;<field name="remote_path"/>&ndash;&gt;-->
        <!--&lt;!&ndash;<field name="file_binary"/>&ndash;&gt;-->
        <!--&lt;!&ndash;<field name="state"/>&ndash;&gt;-->
        <!--&lt;!&ndash;<field name="version"/>&ndash;&gt;-->
        <!--&lt;!&ndash;<field name="product_tmpl_id"/>&ndash;&gt;-->
        <!--&lt;!&ndash;<field name="review_id"/>&ndash;&gt;-->
        <!--&lt;!&ndash;<field name="type"/>&ndash;&gt;-->
        <!--&lt;!&ndash;</group>&ndash;&gt;-->
        <!--&lt;!&ndash;</group>&ndash;&gt;-->

        <!--&lt;!&ndash;</sheet>&ndash;&gt;-->
        <!--&lt;!&ndash;</form>&ndash;&gt;-->
        <!--</field>-->
        <!--</page>-->
        <!--</xpath>-->
        <!--</field>-->
        <!--</record>-->

        <record id="pdm_view_product_attachment_filter" model="ir.ui.view">
            <field name="name">product attachment info</field>
            <field name="model">product.attachment.info</field>
            <field name="arch" type="xml">
                <search string="Search product">
                    <field name="product_tmpl_id" string="产品名称"/>
                    <field name="file_name" string="文件名称"/>
                    <group expand="0" string="Group By">
                        <filter string="状态" domain="[]" context="{'group_by':'state'}"/>
                        <filter string="类型" domain="[]" context="{'group_by':'type'}"/>
                    </group>
                </search>
            </field>
        </record>


        <!--<record id="product_attachment_info_update_file_ss" model="ir.ui.view">-->
        <!--<field name="name">修改审核流程</field>-->
        <!--<field name="model">tag.flow.info</field>-->
        <!--<field name="arch" type="xml">-->
        <!--<form string="">-->
        <!--<sheet>-->
        <!--<group>-->

        <!--<field name="name" string="流程名称"/>-->
        <!--<field name="tag_approval_process" invisible="1"/>-->
        <!--<field name="now_process_ids" invisible="1"/>-->

        <!--</group>-->

        <!--<notebook>-->
        <!--<page string="审核流程记录">-->
        <!--<field name="tag_approval_process_ids">-->
        <!--<tree editable="bottom">-->
        <!--<field name="tag_approval_process_partner"-->
        <!--domain="[('employee', '=', True),('tag_approval_process_partner','not in',now_process_ids)]"-->
        <!--string="审核人"-->
        <!--/>-->

        <!--</tree>-->
        <!--</field>-->
        <!--</page>-->
        <!--</notebook>-->

        <!--</sheet>-->
        <!--<footer>-->
        <!--<button string="保存" type="object" name="action_create_new_update_info"-->
        <!--class="btn-primary"/>-->
        <!--&lt;!&ndash;<button name='action_create_many_info' type='object' string='' class='oe_highlight review_reload'/>&ndash;&gt;-->
        <!--&lt;!&ndash;<button string='取消' type="object" name="action_create_new_cancel_info" class='oe_link review_reload' special='cancel'/>&ndash;&gt;-->
        <!--<button string="取消" class="btn-default" name="action_create_new_cancel_info" type="object"/>-->
        <!--</footer>-->
        <!--</form>-->
        <!--</field>-->
        <!--</record>-->


        <record id="tag_flow_update_form" model="ir.ui.view">
            <field name="name">tag.flow.update form</field>
            <field name="model">tag.flow.update</field>
            <field name="arch" type="xml">
                <form string="">

                    <sheet>

                        <div class="o_row">
                            <span>在</span>
                            <field name="now_parnter_id" required="1" options="{'no_create': True}"
                                   domain="[('id','in',context.get('now_parnter'))]"/>
                            <span>审核之后, 添加审核人</span>
                            <field name="add_parnter_id" required="1" options="{'no_create': True}"
                                   domain="[('id','not in',context.get('add_parnter')),('employee', '=', True)]"/>
                            <span></span>
                        </div>

                        <!--<field name="now_parnter_ids"/>-->
                        <!--<field name="add_parnter_id"/>-->

                    </sheet>

                    <footer>
                        <button string="保存" type="object" name="action_create_new_update_info" class="btn-primary"/>
                        <button string='取消' type="object" class='oe_link review_reload' special='cancel'/>
                    </footer>

                </form>
            </field>
        </record>


        <record id="tag_info_form" model="ir.ui.view">
            <field name="name">tag.info form</field>
            <field name="model">tag.info</field>
            <field name="arch" type="xml">
                <form string="">
                    <sheet>
                        <group>
                            <group>
                                <field name="name"/>
                            </group>
                            <group>
                                <field name="file_size"/>
                            </group>
                        </group>
                        <group>
                            <field name="remark"/>
                        </group>

                    </sheet>

                    <footer>
                        <button name="save_tag_info" string="保存" type="object" class="btn-primary"/>
                        <button string="取消" class="btn-default" special="cancel"/>
                    </footer>

                </form>
            </field>
        </record>


        <record id="product_attachment_info_new_file" model="ir.ui.view">
            <field name="name">文件详细</field>
            <field name="model">product.attachment.info</field>
            <field name="arch" type="xml">
                <form string="">
                    <sheet>
                        <group>

                            <field name="file_product_tmpl_id" readonly="1" string="产品名称"/>
                            <!--<field name="file_product_tmpl_id" />-->

                            <field name="type" class="this_my_type" invisible="1"/>
                            <field name="tag_upload_file" invisible="1"/>
                            <field name="tag_type_id" options="{'no_create': True}"/>
                            <field name="tag_type_flow_id"/>
                        </group>
                        <group>
                            <field name="file_binary" widget="pdm_proxy_widget"
                                   attrs="{'invisible': [('tag_upload_file', '!=', True)]}"/>
                            <field name="file_binary" class="this_my_file_binary"
                                   attrs="{'invisible': [('tag_upload_file', '=', True)]}"/>
                        </group>
                        <!--<group style="margin-left: 18%;">-->

                        <!--<group attrs="{'invisible': [('tag_upload_file', '!=', True)]}">-->
                        <!--&lt;!&ndash;<a id="file_click_me_my" class="o_form_input" href="javascript:void(-1);">测试赋值&ndash;&gt;-->
                        <!--&lt;!&ndash;</a>&ndash;&gt;-->
                        <!--<a id="file_click_me" class="o_form_input" href="javascript:void(-1);">选择文件-->
                        <!--</a>-->
                        <!--</group>-->

                        <!--</group>-->
                        <group>
                            <!--<field name="file_name" attrs="{'invisible': [('type', 'not in', ('design','other'))]}"/>-->
                            <field name="file_name" class="this_my_filename" placeholder="输入格式（*.*）"/>
                            <field name="remote_path" class="this_my_remote_path"
                                   attrs="{'invisible': [('tag_upload_file', '!=', True)]}"/>
                            <field name="state" invisible="1"/>
                            <field name="version" invisible="1"/>
                            <field name="product_tmpl_id" invisible="1"/>
                            <field name="review_id" invisible="1"/>
                            <field name="remark"/>
                        </group>
                        <!--<script type="text/javascript" src="/linkloving_pdm/static/src/js/file_click_form.js"/>-->

                        <notebook>
                            <page string="审核流程记录">
                                <field name="file_review_process_line_ids">
                                    <tree editable="bottom" create="0" delete="0">
                                        <field name="review_order_seq" string="顺序" invisible="1"/>
                                        <field name="last_review_line_id" string="上一级审核" invisible="1"/>

                                        <field name="partner_id" readonly="1" string="待...审核"/>
                                        <field name="state_copy" readonly="1"/>
                                        <field name="remark" string="备注" readonly="1"/>
                                        <field name="review_time" readonly="1"/>
                                    </tree>
                                </field>
                            </page>
                        </notebook>


                    </sheet>
                    <footer>
                        <button string="保存" type="object" name="action_create_many_info"
                                class="btn-primary"/>
                        <!--<button name='action_create_many_info' type='object' string='' class='oe_highlight review_reload'/>-->
                        <button string='取消' class='oe_link review_reload' special='cancel'/>
                    </footer>
                </form>
            </field>
        </record>


        <record id="product_attachment_info" model="ir.ui.view">
            <field name="name">product.attachment.info.form</field>
            <field name="model">product.attachment.info</field>
            <field name="arch" type="xml">
                <form string="">
                    <sheet>
                        <group>
                            <field name="temp_product_tmpl_ids" widget="many2many_tags" options="{'no_create': True}"/>
                            <field name="type" class="this_my_type_file" invisible="1"/>
                            <field name="tag_upload_file" invisible="1"/>
                            <field name="tag_type_id" options="{'no_create': True}"/>
                            <field name="tag_type_flow_id"/>
                            <field name="flow_version" invisible="1"/>
                        </group>
                        <group>
                            <field name="file_binary" widget="pdm_proxy_widget"
                                   attrs="{'invisible': [('tag_upload_file', '!=', True)]}"/>
                            <field name="file_binary" class="this_my_file_binary"
                                   attrs="{'invisible': [('tag_upload_file', '=', True)]}"/>
                        </group>
                        <!--<group style="margin-left: 18%;">-->

                        <!--<group attrs="{'invisible': [('tag_upload_file', '!=', True)]}">-->
                        <!--&lt;!&ndash;<a id="file_click_me_my" class="o_form_input" href="javascript:void(-1);">测试赋值&ndash;&gt;-->
                        <!--&lt;!&ndash;</a>&ndash;&gt;-->
                        <!--<a id="file_click_me" class="o_form_input" href="javascript:void(-1);">选择文件-->
                        <!--</a>-->
                        <!--</group>-->

                        <!--</group>-->
                        <group>
                            <!--<field name="file_name" attrs="{'invisible': [('type', 'not in', ('design','other'))]}"/>-->
                            <field name="file_name" class="this_my_filename" placeholder="输入格式（*.*）"/>
                            <field name="remote_path" class="this_my_remote_path"
                                   attrs="{'invisible': [('tag_upload_file', '!=', True)]}"/>
                            <field name="state" invisible="1"/>
                            <field name="version" invisible="1"/>
                            <field name="product_tmpl_id" invisible="1"/>
                            <field name="review_id" invisible="1"/>
                            <field name="remark"/>
                        </group>
                        <!--<script type="text/javascript" src="/linkloving_pdm/static/src/js/file_click_form.js"/>-->
                    </sheet>
                    <footer>
                        <button string="保存" type="object" name="action_create_many_info"
                                class="btn-primary"/>
                        <!--<button name='action_create_many_info' type='object' string='' class='oe_highlight review_reload'/>-->
                        <button string='取消' class='oe_link review_reload' special='cancel'/>
                    </footer>
                </form>
            </field>
        </record>

        <record id="tag_product_attachment_info_tree" model="ir.ui.view">
            <field name="name">tag.flow.info tree</field>
            <field name="model">tag.flow.info</field>
            <field name="arch" type="xml">
                <tree string="更多">
                    <field name="display_name" string="流程名称"/>
                    <!--<field name="review_type" string="审核类型"/>-->
                </tree>
            </field>
        </record>


        <record id="tag_product_attachment_info_form" model="ir.ui.view">
            <field name="name">设置审核流程</field>
            <field name="model">tag.flow.info</field>
            <field name="arch" type="xml">
                <form string="设置文件标签">
                    <sheet>
                        <group>
                            <field name="name"/>
                            <!--<field name="partner_id" require="1"-->
                            <!--options="{'no_create':True}"-->
                            <!--domain="[('employee', '=', True)]"/>-->
                        </group>

                        <group>
                            <notebook>
                                <!--<page string="审批流程">-->
                                <!--<field name="tag_approval_process" domain="[('employee', '=', True)]"/>-->
                                <!--</page>-->
                                <page string="审批流程">
                                    <field name="tag_approval_process_ids" mode="tree,kanban">
                                        <form string="审批流程">
                                            <group>

                                                <field name="tag_approval_process_partner" options="{'no_create':True}" domain="[('employee', '=', True)]" string="审核人" readonly="0"/>

                                            </group>
                                        </form>
                                        <tree string="Sales Order Lines" editable="bottom">
                                            <field name="sequence" widget="handle"/>
                                            <field name="tag_approval_process_partner" options="{'no_create':True}" domain="[('employee', '=', True)]" string="审核人" readonly="0"/>
                                        </tree>
                                        <kanban class="o_kanban_mobile">
                                            <!--<field name="sequence" widget="handle"/>-->
                                            <field name="tag_approval_process_partner"/>
                                            <templates>
                                                <t t-name="kanban-box">
                                                    <div t-attf-class="oe_kanban_card oe_kanban_global_click">
                                                        <div class="row">
                                                            <div class="col-xs-12">
                                                                <strong>
                                                                    <span>
                                                                        <t t-esc="record.tag_approval_process_partner.value"/>
                                                                    </span>
                                                                </strong>
                                                            </div>
                                                        </div>
                                                        <div class="row">
                                                            <div class="col-xs-8 text-muted">
                                                                <span>
                                                                    <t t-esc="record.product_uom_qty.value"/>
                                                                    <t t-esc="record.product_uom.value"/>
                                                                </span>
                                                            </div>
                                                            <div class="col-xs-4 text-muted">
                                                                <span class="pull-right text-right">
                                                                    <t t-esc="record.price_subtotal.value"/>
                                                                </span>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </t>
                                            </templates>
                                        </kanban>
                                    </field>
                                    <div class="oe_clear"/>
                                </page>
                            </notebook>
                        </group>


                    </sheet>
                </form>
            </field>
        </record>


        <record id="final_review_partner_tree" model="ir.ui.view">
            <field name="name">final.review.partner</field>
            <field name="model">final.review.partner</field>
            <field name="arch" type="xml">
                <tree string="终审人">
                    <field name="final_review_partner_id"/>
                    <field name="review_type" string="审核类型"/>
                </tree>
            </field>
        </record>

        <record model="ir.actions.act_window" id="action_final_review_partner">
            <field name="name">终审人设置</field>
            <field name="type">ir.actions.act_window</field>
            <field name="res_model">final.review.partner</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form</field>
            <field name="help" type="html">
                <p class="oe_view_nocontent_create">
                    Click to add a Barcode Nomenclature .
                </p>
                <p>
                    终审人设置
                </p>
            </field>
        </record>

        <menuitem id="final_review_partner_menu"
                  parent="stock.menu_stock_config_settings"
                  action="action_final_review_partner"
                  sequence="50" groups=""/>

        <record id="review_process_wizard_form" model="ir.ui.view">
            <field name="name">选择下一个审核人</field>
            <field name="model">review.process.wizard</field>
            <field name="arch" type="xml">
                <form string="选择下一个审核人">
                    <sheet>
                        <group>
                            <field name="cur_partner_id" invisible="1"/>
                            <field name="partner_id" require="1"
                                   options="{'no_create':True}" invisible="context.get('new_file_style')"
                                   domain="[('id','!=',cur_partner_id),('employee', '=', True)]"/>


                            <field name="remark" invisible="context.get('new_file_style')"/>

                            <field name="remark_content" widget="html" options="{'style-inline': true}" string="备注"
                                   invisible="not context.get('new_file_style')"/>


                            <!--<field name="need_sop" widget="radio" invisible="context.get('review_type')!='bom_review'"/>-->
                            <!--<field name="sop_name" readonly="1" invisible="context.get('review_type')!='bom_review'"/>-->
                        </group>

                        <div invisible="context.get('new_file_style')">
                            <p style="color:red;">提示：如需终审，请提交给以下终审人</p>
                            <group>
                                <field name="down_man" readonly="1"/>
                            </group>
                        </div>

                    </sheet>
                    <footer>

                        <div invisible="not context.get('new_file_style')">

                            <button name='action_to_next' invisible="not context.get('is_first')" type='object'
                                    string='提交审核' class='oe_highlight review_reload'/>
                            <button name='action_to_next' invisible="context.get('is_first')" type='object' string='同意'
                                    class='oe_highlight review_reload'/>

                            <button name='action_deny'
                                    invisible="context.get('is_show_action_deny') == 'false' or context.get('view_show')"
                                    type='object' string='审核不通过' class='oe_highlight review_reload'/>
                            <button string='取消' class='oe_link review_reload' special='cancel'/>

                        </div>

                        <div invisible="context.get('new_file_style')">
                            <!--<div style="float:left">-->
                            <button name='action_to_next' type='object' string='送审' class='oe_highlight review_reload'/>
                            <!--</div>-->
                            <!--<div invisible="context.get('view_material_request')" style="float:left">-->
                            <button string='送往终审' type='object' name='action_to_next' class='oe_link review_reload'
                                    context="{'to_last_review':True}"/>

                            <!--BOM审核-->
                            <button name='action_pass' type='object' string='审核通过' class='oe_highlight review_reload'
                                    groups="linkloving_pdm.group_final_review_partner_bom"
                                    invisible="not context.get('is_final_one')"
                            />
                            <!--文件审核-->
                            <button name='action_pass' type='object' string='审核通过' class='oe_highlight review_reload'
                                    groups="linkloving_pdm.group_final_review_partner"
                                    invisible="context.get('project_line_pass_show') or context.get('is_final_one')"
                            />

                            <!--工程审核-->
                            <button name='action_pass' type='object' string='审核通过' class='oe_highlight review_reload'
                                    groups="linkloving_pdm.group_final_review_picking_project,linkloving_pdm.group_final_review_picking_line"
                                    invisible="not context.get('project_line_pass_show')"
                            />


                            <button name='action_deny'
                                    invisible="context.get('is_show_action_deny') == 'false' or context.get('view_show')"
                                    type='object' string='审核不通过' class='oe_highlight review_reload'/>
                            <!--is_show_action_deny-->
                            <!--</div>-->
                            <button string='取消' class='oe_link review_reload' special='cancel'/>
                        </div>
                    </footer>
                </form>
            </field>
        </record>

        <record id="review_process_cancel_wizard_form" model="ir.ui.view">
            <field name="name">填写取消审核原因</field>
            <field name="model">review.process.cancel.wizard</field>
            <field name="arch" type="xml">
                <form string="填写取消审核原因">
                    <sheet>
                        <group>
                            <field name="remark"/>
                        </group>
                    </sheet>
                    <footer>
                        <button name='action_cancel_review' type='object' string='确定取消审核'
                                class='oe_highlight review_reload'/>
                        <button string='放弃' class='oe_link review_reload' special='cancel'/>
                    </footer>
                </form>
            </field>
        </record>


        <template id="document_manage_static" name="linkloving_document_manage" inherit_id="web.assets_backend">
            <xpath expr="." position="inside">

                <script type="text/javascript" src="/linkloving_pdm/static/src/js/document_load.js"/>
                <link rel="stylesheet" href="/linkloving_pdm/static/src/css/document_load.css"/>
                <script type="text/javascript" src="/linkloving_pdm/static/src/js/pdm_proxy_widget.js"/>
            </xpath>
        </template>

    </data>
</openerp>